document.getElementById("loginForm")?.addEventListener("submit", (e) => {
  e.preventDefault();
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const msg = document.getElementById("loginMsg");
  msg.textContent = "";

  if (!username || !password) {
    msg.textContent = "Please enter username and password.";
    return;
  }

  let users = [];
  try {
    users = JSON.parse(localStorage.getItem("users")) || [];
  } catch {
    users = [];
  }

  const user = users.find((u) => u.username === username && u.password === password);
  if (user) {
    localStorage.setItem("isLoggedIn", "true");
    localStorage.setItem("currentUser", username);
    window.location.href = "dashboard.html";
  } else {
    msg.textContent = "Invalid credentials";
  }
});
